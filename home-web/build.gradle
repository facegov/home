plugins {
    id "com.github.node-gradle.node" version "7.0.1"
}

group = 'com.facegov'
version = '0.0.1-SNAPSHOT'

node {
    download = true
    version = "18.17.1"
}

tasks.register('buildHomeWebApp', NodeTask) {
    dependsOn npmInstall
    dependsOn copyHomeWebApp
    script = file('node_modules/react-scripts/bin/react-scripts.js')
    args = ['build']
}

tasks.register('copyHomeWebApp', Copy) {
    from "${rootDir}/home-web/build"
    into "${rootDir}/home-backend/build/resources/main/static"
}